<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Retro DR Radio - LED Display</title>

<style>
/* SIDE */
body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,sans-serif;
  background:#1a120b;
  color:#f5efe6;
  overflow:hidden;
}

/* WRAPPER – perfekt centrering */
.radio-wrap{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100vw;
  height:100vh;
}

/* =========================================================
   RESPONSIVE SCALE til M10 (portræt/landskab)
   - Grundidé: vi bruger en CSS-variabel for scale.
   - Default: 0.9 (80% større end 0.5)
   - Portræt: lidt mindre, så det ikke klippes
   - Landskab: kan være en smule større
========================================================= */
:root{
  --radio-scale: 0.9; /* ✅ 80% større end før (0.5*1.8=0.9) */
}

/* RADIO KABINET */
.radio{
  position: relative;
  width:min(1200px,97vw);
  padding:46px;
  border-radius:40px;
  background:linear-gradient(180deg,#4b2e1a,#2f1a0e);
  border:6px solid #2a160a;
  box-shadow:
    inset 0 0 0 3px #8b5a2b,
    0 40px 80px rgba(0,0,0,.7);

  transform:scale(var(--radio-scale)); /* ✅ bruger variabel */
  transform-origin:center center;
}

/* FØDDER */
.radio::after, .radio::before{
  content:'';
  position:absolute;
  bottom:-18px;
  width:36px;
  height:18px;
  border-radius:50%;
  background:#3b2413;
}
.radio::before{ left:40px; }
.radio::after{ right:40px; }

/* DISPLAY – FAST HØJDE, SÅ DET IKKE HOPPER */
.display{
  background:#020800;
  border-radius:22px;
  padding:26px;
  font-size:46px;
  line-height:1;
  height:calc(46px + 26px*2);
  display:flex;
  align-items:center;
  justify-content:center;

  text-align:center;
  margin-bottom:34px;
  border:3px solid #8b5a2b;
  font-family:'Courier New', monospace;
  letter-spacing:2px;

  transition:color .35s ease, text-shadow .35s ease, filter .35s ease;
}

/* TÆNDT – BLÅ LED */
.display.on{
  color:var(--led,#00ccff);
  text-shadow:
    0 0 10px var(--led,#00ccff),
    0 0 20px var(--led,#00ccff),
    0 0 32px rgba(0,204,255,.55);
  animation:ledPulse 2.6s ease-in-out infinite;
}

/* SLUKKET/STOPPET/TRYK IGEN – GRÅ/HVID */
.display.off{
  color:#707070;
  text-shadow:0 0 6px rgba(255,255,255,.15);
  filter:brightness(.95);
}

/* POWER OFF */
.display.poweroff{
  color:#d8d8d8;
  text-shadow:
    0 0 8px rgba(255,255,255,.20),
    0 0 2px rgba(255,255,255,.15);
  filter:brightness(1.03);
}

@keyframes ledPulse{
  0%,100%{ filter:brightness(1.05); }
  50%{ filter:brightness(1.25); }
}

/* KANALKANPPER */
.buttons{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:30px;
}

button{
  font-size:44px;
  padding:40px 0;
  border-radius:28px;
  border:3px solid #8b5a2b;
  background:linear-gradient(180deg,#c77c3c,#8b5a2b);
  color:#f5efe6;
  cursor:pointer;
}

button.active{
  background:linear-gradient(180deg,#ffd966,#b38f1d);
  color:#120a05;
}

/* MIDTE */
.center-row{
  margin-top:40px;
  display:grid;
  grid-template-columns:1fr auto 1fr;
  gap:28px;
  align-items:center;
}

/* HØJTTALER */
.speaker{
  height:110px;
  border-radius:20px;
  background:
    radial-gradient(circle at 2px 2px,#00000055 20%,transparent 21%) 0 0/10px 10px,
    linear-gradient(180deg,#5a3a1e,#3b2413);
  border:3px solid #8b5a2b;
}

/* SLUK / TÆND */
.mute{
  font-size:48px;
  width:240px;
  height:140px;
  display:flex;
  align-items:center;
  justify-content:center;

  border:none;
  border-radius:30px;
  color:#fff;
  cursor:pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,.4);
}

.mute.offstate{
  background:linear-gradient(180deg,#ff4c4c,#b31f1f);
}

.mute.onstate{
  background:linear-gradient(180deg,#39d98a,#0e8a4f);
}

/* VOLUME */
.volume{
  margin-top:46px;
}

.volume-header{
  display:flex;
  justify-content:space-between;
  font-size:34px;
  margin-bottom:22px;
}

input[type=range]{
  width:100%;
  height:40px;
  -webkit-appearance:none;
  background:#3b2413;
  border-radius:20px;
  border:3px solid #8b5a2b;
}

input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:136px;
  height:136px;
  border-radius:50%;
  background:linear-gradient(180deg,#ffd966,#b38f1d);
  border:4px solid #2a160a;
}

audio{display:none;}

/* =========================================================
   PORTRÆT: typisk M10 holdt lodret
   - lidt mindre scale så alt er synligt
   - knapper i 2 kolonner (nemmere i portræt)
========================================================= */
@media (orientation: portrait){
  :root{ --radio-scale: 0.78; } /* ✅ stadig større end 0.5, men passer bedre lodret */

  .radio{
    padding:40px;
    border-radius:38px;
  }

  .buttons{
    grid-template-columns:1fr 1fr;
    gap:26px;
  }

  /* få P5 til at fylde hele bredden i 2-kolonne layout */
  #btnP5{ grid-column:1 / -1; }

  button{
    font-size:42px;
    padding:36px 0;
  }

  .display{
    font-size:44px;
    height:calc(44px + 26px*2);
  }

  .mute{
    width:240px;
    height:140px;
    font-size:46px;
  }

  .speaker{
    height:100px;
  }

  input[type=range]::-webkit-slider-thumb{
    width:128px;
    height:128px;
  }
}

/* =========================================================
   LANDSKAB: typisk M10 på bord/holder vandret
========================================================= */
@media (orientation: landscape){
  :root{ --radio-scale: 0.92; } /* ✅ en anelse større i landskab */
}

/* Ekstra sikkerhedsnet hvis skærmen er lav i højden */
@media (max-height: 720px){
  :root{ --radio-scale: 0.80; }
}
</style>
</head>

<body>

<div class="radio-wrap" id="app">
  <div class="radio">

    <div class="display off" id="display">KLAR</div>

    <div class="buttons">
      <button id="btnP1">P1</button>
      <button id="btnP2">P2</button>
      <button id="btnP5">P5 Nordjylland</button>
    </div>

    <div class="center-row">
      <div class="speaker"></div>
      <button class="mute offstate" id="btnMute">SLUK</button>
      <div class="speaker"></div>
    </div>

    <div class="volume">
      <div class="volume-header">
        <span>Lydstyrke</span>
        <span id="volText">60</span>
      </div>
      <input id="vol" type="range" min="0" max="100" value="60">
    </div>

    <audio id="audio"></audio>
  </div>
</div>

<script>
/* ========= FULD SKÆRM (MULIGHED B) ========= */
let isFullScreen = false;

function goFullScreen(){
  if(isFullScreen) return;

  const el = document.documentElement;
  if(el.requestFullscreen){
    el.requestFullscreen();
  }else if(el.webkitRequestFullscreen){
    el.webkitRequestFullscreen();
  }
  isFullScreen = true;
}

/* Gå i fuld skærm ved første tryk */
document.addEventListener("click", goFullScreen, { once:true });
document.addEventListener("touchstart", goFullScreen, { once:true });

/* ========= RADIO LOGIK ========= */
const audio = document.getElementById("audio");
const display = document.getElementById("display");
const btnMute = document.getElementById("btnMute");

const streams = {
  p1: "https://live-icy.dr.dk/A/A03H.mp3",
  p2: "https://live-icy.dr.dk/A/A04H.mp3",
  p5: "https://live-icy.dr.dk/A/A18H.mp3"
};

const led = {
  p1: "#00ccff",
  p2: "#2e7bff",
  p5: "#19d2ff"
};

let poweredOff = false;

function setDisplay(state, text, channel){
  display.textContent = text;
  display.className = "display " + state;
  if(state === "on"){
    display.style.setProperty("--led", led[channel] || "#00ccff");
  }else{
    display.style.removeProperty("--led");
  }
}

async function play(ch){
  poweredOff = false;

  btnMute.textContent = "SLUK";
  btnMute.className = "mute offstate";

  audio.pause();
  audio.src = streams[ch];
  audio.load();

  try{
    await audio.play();
    setDisplay("on", "DR " + ch.toUpperCase(), ch);
    setActiveButton(ch);
  }catch{
    setDisplay("off", "TRYK IGEN");
  }
}

function setActiveButton(ch){
  // (valgfrit) marker aktiv kanal tydeligt
  document.getElementById("btnP1").classList.toggle("active", ch === "p1");
  document.getElementById("btnP2").classList.toggle("active", ch === "p2");
  document.getElementById("btnP5").classList.toggle("active", ch === "p5");
}

btnP1.onclick = () => play("p1");
btnP2.onclick = () => play("p2");
btnP5.onclick = () => play("p5");

btnMute.onclick = () => {
  if(poweredOff){
    play("p1");
    return;
  }
  audio.pause();
  poweredOff = true;

  btnMute.textContent = "TÆND";
  btnMute.className = "mute onstate";

  setActiveButton(""); // ingen aktiv
  setDisplay("poweroff", "SLUKKET");
};

/* =========================================================
   VOLUME: “større spænd” / mere effekt pr. slide
   - slideren er stadig 0-100
   - men vi laver en aggressiv kurve (hurtigere op/ned)
   - og vi giver den en “boost” faktor
========================================================= */
const vol = document.getElementById("vol");
const volText = document.getElementById("volText");

function applyVolumeFromSlider(value0to100){
  const v = value0to100 / 100;     // 0..1
  const boost = 1.35;              // ✅ større spænd (justér 1.2 - 1.6 efter smag)
  const shaped = Math.pow(v, 0.55); // ✅ gør den mere “hurtig” (lavere exponent = mere aggressiv)
  audio.volume = Math.min(1, shaped * boost);
}

vol.oninput = e => {
  const val = Number(e.target.value);
  applyVolumeFromSlider(val);
  volText.textContent = val;
};

// startværdi
applyVolumeFromSlider(Number(vol.value));
</script>

</body>
</html>
